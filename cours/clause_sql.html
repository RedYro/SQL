<!doctype html>
<html lang="fr">
<head>
     <!-- Required meta tags -->
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
     <!-- Bootstrap CSS v5.2.1 -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
     integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
     <!-- Google font -->
     <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&family=Open+Sans&display=swap" rel="stylesheet"> 
     <!-- feuille de style -->
     <link rel="stylesheet" href="assets/css/style.css">
     <title>Clauses SQL</title>
</head>
<body>
     <header>
          <nav class="navbar navbar-expand-sm navbar-light bg-light  border-bottom border-dark">
               <div class="container-fluid">
                    <a class="navbar-brand" href="#"><img src="assets/img/logo.png" alt="logo"></a>
                    <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavId" aria-controls="collapsibleNavId"
                         aria-expanded="false" aria-label="Toggle navigation">
                         <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="collapsibleNavId">
                         <ul class="navbar-nav me-auto mt-2 mt-lg-0">
                              <li class="nav-item">
                                   <a class="nav-link" href="index.html" >Acronyme</a>
                              </li>
                              <li class="nav-item">
                                   <a class="nav-link" href="cours.html">Cours</a>
                              </li>
                              <li class="nav-item">
                                   <a class="nav-link" href="clause_sql.html">Clauses SQL</a>
                              </li>
                              <li class="nav-item">
                                   <!-- <a class="nav-link" href="#">Link</a> -->
                              </li>
                         </ul>
                    </div>
               </div>
          </nav>
     </header>
     <div class="container">
            <!-- Début de main -->
          <main>
               <div class="row m-2 border border-dark p-5">
                   <div class="col-sm-12">
                       <h2 class="text-center">1 - Les requêtes de base</h2>
                       <hr>
                   </div>
                   <div class="col-sm-12 d-flex justify-content-center mt-5">
                       <ul>
                           <li>Créer une BDD : <strong> <code>CREATE DATABASE IF NOT EXISTS nomBdd</code></strong></li>
                           <li>Supprimer une BDD :  <strong> <code>DROP DATABASE IF EXIST nomBdd</code></strong> </li>
                           <li>Observer la description d'une table  : <strong> <code> DESC users</code></strong></li>
                           <li>Voir les BDD dans le serveur  : <strong> <code> SHOW DATABASES</code></strong></li>
                       </ul>
                   </div>
               </div> <!-- fin row -->  
               <div class="row m-2 border border-dark p-5">
               <div class="col-sm-12">
                   <h2 class="text-center">2 - Tables et colonnes</h2>
                   <hr>
               </div>
               <div class="col-sm-12 d-flex justify-content-center mt-5">
                   <ul>
                         <li>Créer une BDD 'entreprise'</li>
                         <li>Créer une table dans la base 'entreprise':<br>
                              <strong><code>CREATE TABLE IF NOT EXISTS employes (<br>
                              id_employes INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,<br>
                              prenom VARCHAR(20)  NULL,<br>
                              nom VARCHAR(20)  NULL,<br>
                              sexe ENUM ('f', 'm') NOT NULL,<br>
                              service VARCHAR(30)  NULL,<br>
                              date_embauche DATE  NULL,<br>
                              salaire FLOAT  NULL<br>
                              )</code></strong>
                         </li>
                         <li>Ici, on a d'abord créer un table. On va ensuite lui ajouter des colonnes auxquelle on va déjà attricuer des données.      
                         </li>
                         <li>Insérer des données dans une table :
                              <p><strong> <code>INSERT INTO employes (id_employes, prenom, nom, sexe, service, date_embauche, salaire) VALUES<br>
                                   (350, 'Jean-pierre', 'Laborde', 'm', 'direction', '1999-12-09', 5000),<br>
                                   (388, 'Clement', 'Gallet', 'm', 'commercial', '2000-01-15', 2300),<br>
                                   (415, 'Thomas', 'Winter', 'm', 'commercial', '2000-05-03', 3550),<br>
                                   (417, 'Chloe', 'Dubar', 'f', 'production', '2001-09-05', 1900),<br>
                                   (491, 'Elodie', 'Fellier', 'f', 'secretariat', '2002-02-22', 1600),<br>
                                   (509, 'Fabrice', 'Grand', 'm', 'comptabilite', '2003-02-20', 1900),<br>
                                   (547, 'Melanie', 'Collier', 'f', 'commercial', '2004-09-08', 3100),<br>
                                   (592, 'Laura', 'Blanchet', 'f', 'direction', '2005-06-09', 4500),<br>
                                   (627, 'Guillaume', 'Miller', 'm', 'commercial', '2006-07-02', 1900),<br>
                                   (655, 'Celine', 'Perrin', 'f', 'commercial', '2006-09-10', 2700),<br>
                                   (699, 'Julien', 'Cottet', 'm', 'secretariat', '2007-01-18', 1390),<br>
                                   (701, 'Mathieu', 'Vignal', 'm', 'informatique', '2008-12-03', 2000),<br>
                                   (739, 'Thierry', 'Desprez', 'm', 'secretariat', '2009-11-17', 1500),<br>
                                   (780, 'Amandine', 'Thoyer', 'f', 'communication', '2010-01-23', 1500),<br>
                                   (802, 'Damien', 'Durand', 'm', 'informatique', '2010-07-05', 2250),<br>
                                   (854, 'Daniel', 'Chevel', 'm', 'informatique', '2011-09-28', 1700),<br>
                                   (876, 'Nathalie', 'Martin', 'f', 'juridique', '2012-01-12', 3200),<br>
                                   (900, 'Benoit', 'Lagarde', 'm', 'production', '2013-01-03', 2550),<br>
                                   (933, 'Emilie', 'Sennard', 'f', 'commercial', '2014-09-11', 1800),<br>
                                   (990, 'Stephanie', 'Lafaye', 'f', 'assistant', '2015-06-02', 1775);
                              </code> </strong></p>                        
                         </li>
                         <li>
                              Syntaxe alternative : ne permet pas d'insérer plusieurs séries de valeurs en une seule requête,
                              contrairement à la syntaxe de base.
                         </li>
                       <li>
                          
                           <p><strong> <code>INSERT INTO users SET id_employes = 350 , prenom = 'Jean-pierre', nom = 'Laborde' , sexe = 'm' , service = 'direction', date_embauche = '1999-12-09', salaire = 5000 </code></strong></p>
                       </li>
                       <li>Effacer une table : <strong> <code>DROP TABLE nomTable</code></strong></li>  
                   </ul>
               </div>
               </div> <!-- fin row -->  
               <div class="row m-2 border border-dark p-2">
                    <div class="col-sm-12">
                        <hr>
                        <h2 class="text-center" id="select">3- SELECT et DISTINCT</h2>
                        <hr>
                    </div>
                    <div class="col-sm-12 col-md-6 m-2">
                      <ul>
                          <li>Pour voir tous le contenu d'un table : <code>SELECT * FROM employes;</code></li>
                          <li class="alert alert-success">Sélectionner  les valeurs de deux champs d'une nomTable : <code>SELECT colonne, colonne FROM table;</code></li>
                          <li class="alert alert-success">Afficher les données sans doublons : <code>SELECT DISTINCT (colonne) FROM table;</code></li>
                          <li> Effacer un enregistrement : <strong> <code>DELETE FROM nomTable WHERE nom = ""</code></strong></li>
                      </ul>
                    </div>
                    <div class="col-sm-12 col-md-6">
                      <p class="alert alert-danger">Les requêtes ne sont pas sensibles à la casse mais une convention indique qu'il faut mettre les mots-clefs des requêtes en majuscules. C'est plus facile ainsi de s'y retrouver.</p>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">4 - Opérateurs de comparaison</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 mt-5 text-center">
                         <table class="table table-striped table-hover">
                              <thead>
                                   <tr>
                                        <th scope="col">Opérateur </th>
                                        <th scope="col"> Symbole</th>
                                   </tr>
                              </thead>
                              <tbody>
                                   <tr>
                                        <th scope="row">=</th>
                                        <td>est égal à</td>
                                   </tr>
                                   <tr>
                                        <th scope="row">&gt;</th>
                                        <td>Strictement supérieur à</td>
                                   </tr>
                                   <tr>
                                        <th scope="row">&lt;</th>
                                        <td>Strictement inférieur à</td>
                                   </tr>
                                   <tr>
                                        <th scope="row">&gt;=</th>
                                        <td>Supérieur ou égal à</td>
                                   </tr>
                                   <tr>
                                        <th scope="row">&lt;=</th>
                                        <td>Inférieur ou égal à</td>
                                   </tr>
                                   <tr>
                                        <th scope="row">&gt; &lt; ou !=</th>
                                        <td>est différent de</td>
                                   </tr>
                              </tbody>
                         </table>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">5 - Créer un ALIAS avec AS</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 mt-5">
                         <ul>
                              <li>Création d'un ALIAS pour renommer temporairement une colonne ou une table dans une requête. Cette astuce est particulièrement utile pour faciliter la lecture des requêtes</li>
                              <li> <code>SELECT nom, prenom, salaire*12 AS salaire_annuel FROM employes</code> </li>
                         </ul>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">6 - Condtions et conditions multiples</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 col-md-3 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> (à condition que)</h6>
                         <ul>
                              <li class="alert alert-success">Nous recherchons avec une condition une partie des données : <code>SELECT colonne, colonne FROM table WHERE colonne = 'donnée'</code></li>
                              <li>Ici, nous cherchons à trouver le nombre de personnes dont le sexe est masculin : <code>SELECT * FROM employes WHERE sexe = 'm'</code></li>
                              <li>Trouver la personne qui gagne 1390 : <code>SELECT * FROM employes WHERE salaire = 1390;</code></li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-3 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> avec différents champs, différentes valeurs et AND</h6>
                         <ul>
                              <li>Nous cherchons l'employé qui gagne 2000€ et dont le service est commercial : <code>SELECT nom, prenom, service, salaire FROM employes WHERE salaire = 2300 AND service = 'commercial';</code></li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-3 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> avec différents champs, différentes valeurs et OR</h6>
                         <ul>
                              <li>Nous cherchons les employés qui gagnent un salaire de 5000€ ou au moins de 2000€ : <code>SELECT nom, prenom, salaire FROM employes WHERE salaire = 5000 OR salaire &gt;= 2000;</code></li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-3 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> et l'ordre de priorité sur les conditions AND et OR</h6>
                         <ul>
                              <li><code>SELECT nom, prenom, salaire, service FROM employes WHERE service = 'production' AND (salaire = 1900 OR salaire = 2300);</code></li>
                              <li>Lorsqu'il y a AND et OR au sein d'une même requête, le système lit la condition de la requête de la droite vers la gauche. Ainsi, il verra d'abord <code>salire = 2300 OR salaire = 1900</code> puis le service demandé.</li>
                              <li>Pour garantir l'ordre naturel de lecture (gauche à droite), nous utiliserons des parenthèses</li>
                              <li><code>SELECT nom, prenom, salaire, service FROM employes WHERE service = 'production' AND (salaire = 1900 OR salaire = 2300);</code></li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> avec <em>BETWEEN</em> (entre ...)</h6>
                         <ul>
                              <li class="alert alert-success">Nous cherchons avec une condition une partie des données <code>SELECT * FROM table WHERE colonne BETWEEN donnée AND donnée</code></li>
                              <li>Ici, nous cherchons à trouver le nombre de personnes embauchées entre 2006 et 2010 : <code>SELECT * FROM `employes` WHERE date_embauche BETWEEN '2006-01-01' AND '2010-01-01';</code></li>
                              <li class="alert alert-danger">Dans une BDD les dates sont toujours au format États-Unis en YYYY-MM-DD</li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> avec <em>LIKE</em></h6>
                         <ul>
                              <li><code>SELECT * FROM employes WHERE prenom LIKE 's%';</code></li>
                              <li>Affiche les employés dont dont le prénom commence par s</li>
                              <li>Cette façon de faire est très utile dans un motuer de recherche</li>
                              <li>Dans cette ligne de code, le % signifie que l'on recherche le s en début de mot, ainsi la suite de caractères vient après le s</li>
                              <li><code>SELECT * FROM employes WHERE prenom LIKE '%s%'</code></li>
                              <li>Avec la présence du % avant et après le caractère recherché, nous demandons au système de trouver des enregistrements contenant l'expression recherchée : affiche tous les prénoms qui contiennent la lettre s</li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> avec <em>CURDATE() </em>(date courante)</h6>
                         <ul>
                             <li class="alert alert-success">Fonction prédéfinie avec ses parenthèses</li> 
                             <li>Requête qui donne la date du serveur, la date du jour : <code>SELECT CUREDATE()</code></li>
                             <li>Entre une date et aujourd'hui : <code>SELECT * FROM `employes` WHERE date_embauche BETWEEN '2010-01-01' AND CURDATE();</code></li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> avec <em>IN</em></h6>
                         <ul>
                             <li>Trouver les employés de la comptabilité et du service informatique : <code>SELECT nom, prenom, service FROM `employes` WHERE service IN ('comptabilité', 'informatique');</code></li>
                             <li>Égal (=) permet d'annoncer une seule valeur alors que IN permet d'annoncer plusieurs valeurs</li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4 mt-5">
                         <h6 class="text-center">Mot clé <em>WHERE</em> avec <em>NOT IN</em></h6>
                         <ul>
                             <li>Trouver les employés qui ne sont pas en comptabilité et au service informatique : <code>SELECT nom, prenom, service FROM `employes` WHERE service NOT IN ('comptabilité', 'informatique');</code></li>
                             <li>Différent (!=) permet d'exclure une seule valeur alors que NOT IN permet d'exclure plusieurs valeurs</li>
                         </ul>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">7 - Classement avec ORDER BY</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 mt-5">
                         <ul>
                              <li>Grâce à ORDER BY on va classer les données par ordre alphabétique</li>
                              <li>On range les noms par ordre alphabétique décroissant grâce au code suivant : <code>SELECT prenom, nom FROM `employes` ORDER BY nom DESC</code></li>
                              <li>On range les noms par ordre alphabétique croissant grâce au code suivant : <code>SELECT prenom, nom FROM `employes` ORDER BY nom ASC</code></li>
                              <li>Fonctionne aussi pour les strings comme pour les nombres : <code>SELECT nom, prenom, salaire FROM `employes` ORDER BY salaire ASC;</code></li>
                              <li>ORDER BY permet de trier sur plusieurs colonnes "tri multiples" : <code>SELECT nom, prenom, service, salaire FROM `employes` ORDER BY service ASC, salaire ASC;</code></li>
                         </ul>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">8 - Limiter les résultats avec <em>LIMIT</em></h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 mt-5">
                         <ul>
                              <li>Afficher les employés en les classant par salaire (du + grand ou + petit) en limitant le résultats à 3 : <code>SELECT nom, prenom ,service, salaire FROM `employes` ORDER BY salaire DESC LIMIT 0,3;</code></li>
                              <li class="alert alert-danger">Le premier chiffre précise l'enregistrement de départ : 0 définit le premier enregistrement informatique. Le second chiffre indique combien de résultats nous attendons</li>
                         </ul>
                    </div>
               </div> <!-- fin row -->
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">9 - Réaliser des calculs dans les requêtes</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 col-md-12 mt-5">
                         <div class="col-sm-12 col-md-6 mt-5">
                              <h6 class="text-center">Calculer une somme (SUM()) et une moyenne (AVG())</h6>
                              <ul>
                                   <li>Grâce au code suivant : <code>SELECT SUM(salaire*12) FROM `employes`;</code> , on va pouvoir calculer la somme totale des salaires annuel des employés</li>
                                   <li>Avec le code suivant, on calcule le salaire mensuel moyen des employés : <code>SELECT AVG(salaire) FROM `employes`;</code></li>
                              </ul>
                         </div>
                         <div class="col-sm-12 col-md-6 mt-5">
                              <h6 class="text-center">Arrondir avec ROUND()</h6>
                              <ul>
                                   <li>Grâce à ROUND() on peut arrondir le résultat d'un calcul : <code>SELECT ROUND(AVG(salaire)) AS moyenne_mensuelle FROM `employes`;</code></li>
                                   <li class="alert alert-danger">On peut cumuler deux notions comme dans l'exemple précédant avec ROUND et SUM. Attention à la syntaxe et aux parenthèses</li>
                              </ul>
                         </div>
                         <div class="col-sm-12 col-md-6 mt-5">
                              <h6 class="text-center">Compter avec COUNT()</h6>
                              <ul>
                                   <li>Grâce à COUNT() on peut compter par exemple le nombre d'employés qui sont des femmes : <code>SELECT COUNT(*) FROM `employes` WHERE sexe = 'f';</code></li>
                                   <li class="alert alert-danger"><code>SELECT COUNT(*) FROM table WHERE colonne = 'donnée'</code></li>
                              </ul>
                         </div>
                         <div class="col-sm-12 col-md-6 mt-5">
                              <h6 class="text-center">Isoler une valeur minimum et maximum avec MIN() et MAX()</h6>
                              <ul>
                                   <li>Grâce à MIN() on peut trouver par exemple le salaire minimum : <code>SELECT MIN(salaire) FROM `employes`;</code></li>
                                   <li>Grâce à MAX() on peut trouver par exemple le salaire maximum : <code>SELECT MAX(salaire) FROM `employes`;</code></li>
                              </ul>
                         </div>
                    </div>
               </div> <!-- fin row --> 
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">10 - Les regroupements avec GROUP BY</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 mt-5">
                         <ul>
                              <li>Ici on veut connaître le nombre d'employés par service : <code>SELECT service, COUNT(*) AS nombre_employes FROM `employes` GROUP BY service;</code></li>
                         </ul>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">11 - Mot clé HAVING</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 mt-5">
                         <ul>
                              <li>Ici on veut sélectionner seulement les services qui ont plus de deux employés : <code>SELECT service, COUNT(*) FROM `employes` GROUP BY service HAVING COUNT(*) > 2;</code></li>
                         </ul>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">12 - Requête de modification</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 col-md-6 mt-5">
                         <h6 class="text-center">Mise à jour avec UPDATE</h6>
                         <ul>
                              <li>Augmenter le salaire d'un employé : <code>UPDATE `employes` SET `salaire`= 1850 WHERE id_employes = 990;</code></li>
                              <li class="alert alert-danger">On utilise toujours des ID pour mettre à jour les informations de la base de données car c'est le seul élément unique</li>
                              <li>Pour faire plusieurs mise à jour en même temps il faut séparer les données par une virgule : <code>UPDATE `employes` SET `salaire`= 1875, service = 'commercial' WHERE id_employes = 990;</code></li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-6 mt-5">
                         <h6 class="text-center">Supprimer avec DELETE</h6>
                         <ul>
                              <li>Supprimer l'enregistrement d'un employé avec DELETE : <code>DELETE FROM employes WHERE id_employes = 388;</code></li>
                              <li>Supprimer plusieurs enregistrements avec le code suivant : <code>DELETE FROM employes WHERE service = 'informatique';</code> ici on supprime toutes les personnes du service informatique</li>
                         </ul>
                    </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">13 - Requête de imbriquées</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 col-md-12 mt-5">
                         <ul>
                             <li>Consiste à exécuter une requête à l’intérieur d’une autre requête, encapsulée dans une autre requête, il n'y a pas de limite dans le nombre de niveuax d'imbrication.</li>
                             <li>Le résultat de chaque requête imbriquée sert de valeur de référence dans la condition de sélection de la requête de niveau supérieur, appelée requête principale</li>
                             <li>Afin d'avoir un cas concret et un contexte favorable à ce type de requête, nous allons modéliser la base de données d'une bibliothèque</li>
                         </ul>
                         <h4 class="text-center" id="insertInto">1 - Une BDD bibliotheque</h4>
                         <p>Les sujets d'une BDD bibliothèque :</p>
                         <ul>
                             <li>Une table des <strong>livres</strong></li>
                             <li>Une table des <strong>abonnés</strong></li>
                             <li>Une table <strong>emprunt</strong> qui permet de savoir quel livre à été emprunté par quel abonné et à quelle date</li>
                         </ul>
                         <p class="alert alert-danger">Ici, on commence à modéliser notre base de données en réfléchissant à ce qui va aller dedans. </p>       
                    </div>
                    <div class=" col-sm-12 row">
                         <div class="col-sm-12 col-md-4 ">
                             <img src="assets/img/abonne.png" alt="Image représentant la table abonne" class="img-fluid">
                         </div>
                         <div class="col-sm-12 col-md-4 ">
                             <img src="assets/img/livre.png" alt="Image représentant la table livre" class="img-fluid">
                         </div>                   
                         <div class="col-sm-12 col-md-4 ">
                              <img src="assets/img/emprunt.png" alt="Image représentant la table emprunt" class="img-fluid">
                         </div>                
                    </div>
                    <div class="col-sm-12">
                         <ul>
                              <li>
                                   <h6>Création de la BDD :</h6>
                                   <code>-> CREATE DATABASE bibliotheque;</code>
                              </li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4">
                         <ul>
                              <li>
                                   <h6>Création de la TABLE 1 (abonnes) :</h6>
                                   <code>-> CREATE TABLE IF NOT EXISTS abonnes (id_abonne INT(3) NOT NULL PRIMARY KEY AUTO_INCREMENT, prenom VARCHAR(20) NOT NULL);</code>
                              </li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4">
                         <ul>
                              <li>
                                   <h6>Création de la TABLE 2 (emprunt) :</h6>
                                   <code>-> CREATE TABLE IF NOT EXISTS emprunt (id_emprunt INT(3) NOT NULL PRIMARY KEY AUTO_INCREMENT, id_livre INT(3) DEFAULT NULL, id_abonne INT(3) DEFAULT NULL, date_sortie DATE NOT NULL, date_rendu DATE DEFAULT NULL);</code> 
                              </li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-4">
                         <ul>
                              <li>
                                   <h6>Création de la TABLE 3 (livre) :</h6>
                                   <code>-> CREATE TABLE IF NOT EXISTS livre (id_livre INT(3) NOT NULL PRIMARY KEY  AUTO_INCREMENT, auteur VARCHAR(30) NOT NULL, titre VARCHAR(30) NOT NULL);</code>
                              </li>
                         </ul>
                    </div>
                    <div class="col-sm-12 col-md-12 ">
                         <ul>
                             <li>
                                 <h6>Création des clés étrangères : </h6>
                                 <ul>
                                     <li> Dans la table emprunt, id_livre sera un champ clé étrangère en référence au champ id_livre de la table livre. <br>
                                         <code>-> ALTER TABLE emprunt ADD FOREIGN KEY (id_livre) REFERENCES bibliotheque.livre(id_livre);</code>
                                     </li>
                                     <li>Le champ id_abonne de la table emprunt sera une clé étrangère au champ id_abonne de la table abonne.  <br>
                                         <code>-> ALTER TABLE emprunt ADD FOREIGN KEY (id_abonne) REFERENCES bibliotheque.abonne (id_abonne); </code>
                                     </li>
                                 </ul>
                             </li>
                         </ul>
                     </div>
                     <div class="col-sm-12 col-md-12 mt-5">
                    
                         <h6 class="text-center">Insérer des données dans les tables :</h6>
                         
                     </div>
                     <div class="col-sm-12 col-md-4">
                         <ul>
                             <li >
                                 <code>-> INSERT INTO abonne (id_abonne, prenom) VALUES (NULL, 'Guillaume'), (NULL, 'Benoit'), (NULL, 'Chloe'), (NULL, 'Laura');</code>
                             </li>
                         </ul>
                     </div>
                     <div class="col-sm-12 col-md-4">
                         <ul>
                             <li>
                                 <code>-> INSERT INTO livre (id_livre, auteur, titre) VALUES (100, 'GUY DE MAUPASSANT', 'Une vie'), (101, 'GUY DE MAUPASSANT', 'Bel-Ami '), (102, 'HONORE DE BALZAC', 'Le père Goriot'), (103, 'ALPHONSE DAUDET', 'Le Petit chose'), (104, 'ALEXANDRE DUMAS', 'La Reine Margot'),(105, 'ALEXANDRE DUMAS', 'Les Trois Mousquetaires');</code>
                             </li>
                         </ul>
                     </div>
                     <div class="col-sm-12 col-md-4">
                         <ul>
                             <li >
                                 <code>-> INSERT INTO emprunt (id_emprunt, id_livre, id_abonne, date_sortie, date_rendu) VALUES (NULL, 100, 1, '2014-12-17', '2014-12-18'), (NULL, 101, 2, '2014-12-18', '2014-12-20'), (NULL, 100, 3, '2014-12-19', '2014-12-22'), (NULL, 103, 4, '2014-12-19', '2014-12-22'), (NULL, 104, 1, '2014-12-19', '2014-12-28'), (NULL, 105, 2, '2015-03-20', '2015-03-26'), (NULL, 105, 3, '2015-06-13', NULL), (NULL, 100, 2, '2015-06-15', NULL);</code>
                             </li>
                         </ul>
                     </div>
                     <div class="col-sm-12 mt-5">
                         <h6>Exemples de requêtes</h6>
                         <li>Recherche des livres non rendus : <br> <code>-> SELECT * FROM emprunt WHERE date_rendu = NULL;</code></li>
                         <li class="alert alert-danger">Pour trouver quelque chose qui est NULL on utilisera le terme IS : <code>SELECT id_livre FROM emprunt WHERE date_rendu = NULL;</code> ne retourne aucun résultat.</li>
                         <li>Recherche de titres de livres non rendus : <br> <code>-> SELECT titre, id_livre FROM livre WHERE id_livre = (SELECT id_livre FROM emprunt WHERE date_rendu IS NULL);</code></li>
                         <li>On cherche maintenant les id des livres que Chloe a emprunté : <br> <code>-> SELECT id_livre, id_abonne FROM emprunt WHERE id_abonne = (SELECT id_abonne FROM abonnes WHERE prenom = 'Chloe');</code></li>
                         <li>On cherche maintenant le prénom des abonnés ayant emprunté un livre le 2014-12-19 : <br> <code>-> SELECT prenom FROM abonnes WHERE id_abonne IN (SELECT id_abonne FROM emprunt WHERE date_sortie = '2014-12-19');</code></li>
                         <li>Afficher la liste des abonnés ayant emprunté un livre de Daudet : <br> <code>-> SELECT prenom, id_abonne FROM abonnes WHERE id_abonne IN (SELECT id_abonne FROM emprunt WHERE id_livre IN (SELECT id_livre FROM livre WHERE auteur LIKE '%daudet%'));</code></li>
                         <li>Afficher les titres de livre que Benoit a emprunté à la bibliothèque : <br> <code>-> SELECT titre, id_livre FROM livre WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE id_abonne IN(SELECT id_abonne FROM abonnes WHERE prenom ='Benoit'));</code></li>
                         <li>Afficher les titres des livres que Chloe n'a pas emprunté : <br> <code>-> SELECT titre, id_livre FROM livre WHERE id_livre NOT IN (SELECT id_livre FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom = 'Chloe'));</code></li>
                         <li>Afficher les titres des livres que Chloé n'a pas encore rendu à la bibliothèque : <br> <code>-> SELECT titre, id_livre FROM livre WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE date_rendu IS NULL AND id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom ='Chloe'));</code></li>
                         <li>Combien de livres Guillaume a emprunté à la bibliothèque ? :  <br> <code>-> SELECT COUNT(id_livre) FROM livre WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom ='Guillaume'));</code> <br> <code>-> SELECT COUNT(*) AS nb_livre FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom ='Guillaume');</code></li>
                         <li>Quel est le livre qui n'a été emprunté par personne ? : <br> <code>-> SELECT id_livre FROM livre WHERE id_livre NOT IN (SELECT id_livre FROM emprunt);</code></li>
                         <li>Combien de personnes ont emprunté le livre Une vie ? : <br> <code>-> SELECT COUNT(*) FROM emprunt WHERE id_livre IN (SELECT id_livre FROM livre WHERE titre = 'Une vie'); </code></li>
                         <li>Quel livre a été emprunté le dernier ? : <br> <code>-> SELECT id_livre, titre FROM livre WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE date_sortie IN (SELECT MAX(date_sortie) FROM emprunt));</code> <br> <code>-> SELECT titre FROM livre WHERE id_livre IN (SELECT id_livre FROM emprunt ORDER BY date_sortie DESC) LIMIT 1;</code></li>
                     </div>
               </div> <!-- fin row -->  
               <div class="row border border-dark p-2">
                    <div class="col-sm-12">
                         <hr>
                         <h2 class="text-center">14 - Jointures</h2>
                         <hr>
                    </div>
                    <div class="col-sm-12 col mt-5">
                         <ul>
                              <li>Les requêtes de jointures permettent, comme les requêtes imbriquées, l'extraction les données de plusieurs tables</li>
                              <li>L'avantage des jointures est que l'on peut obtenir dans le résultat final des colonnes (des champs) issues de plusieurs tables différentes</li>
                         </ul>
                         <h6>Récapitulatif</h6>
                         <ul>
                              <li><code>-> SELECT</code> : SELECT va comporter la liste des champs que je souhaite afficher dans mon résultat</li>
                              <li><code>-> FROM</code> : FROM comportera la précision de la table que l'on souhaite dans notre requête</li>
                              <li><code>-> WHERE</code> : WHERE permettra de définir la condition de jointure pour assurer le croisement des données</li>
                              <li><code>-> AND / OR</code> : Conditions nécessaires à notre résultat</li>
                         </ul>
                    </div>
                    <div class="col-sm-12">
                         <ul>
                              <li>Dans la BDD bibliotheque, afficher les dates à laquelles Guillaume s'est rendu pour emprunter un livre ou le rendre, <br> <code>-> SELECT abonnes.prenom, emprunt.date_sortie, emprunt.date_rendu FROM abonnes, emprunt WHERE abonnes.prenom ='Guillaume' AND abonnes.id_abonne = emprunt.id_abonne;</code></li>
                              <li>La même chose avec des préfixes : <br> <code>-> SELECT a.prenom, e.date_sortie, e.date_rendu FROM abonnes a, emprunt e WHERE a.prenom ='Guillaume' AND a.id_abonne = e.id_abonne; </code></li>
                              <li>Qui a emprunté le livre 'Une vie' en 2014 ? : <br> <code>-> SELECT a.prenom, e.date_sortie, l.titre FROM abonnes a, emprunt e, livre l WHERE e.date_sortie BETWEEN '2014-01-01' AND '2015-01-01' AND l.titre = 'Une vie' AND e.id_abonne = a.id_abonne AND e.id_livre = l.id_livre;</code> <br> <code>-> SELECT prenom FROM abonnes WHERE id_abonne IN (SELECT id_abonne FROM emprunt WHERE date_sortie LIKE '2014%' AND id_livre IN (SELECT id_livre FROM livre WHERE titre = 'Une vie'));</code></li>
                              <li>Afficher le nombre de livres empruntés par chaque abonné : <br> <code>-> SELECT a.prenom, COUNT(e.id_livre) nb_livre_emprunt FROM abonnes a, emprunt e WHERE e.id_abonne = a.id_abonne GROUP BY e.id_abonne;</code></li>
                              <li>Qui a emprunté quoi et quand ? : <br> <code>-> SELECT a.prenom, l.titre, e.date_sortie FROM abonnes a, emprunt e, livre l WHERE e.id_livre = l.id_livre AND e.id_abonne = a.id_abonne;</code></li>
                              <li>Ajout d'un abonné (Alex) : <br> <code>-> INSERT INTO abonnes (id_abonne, prenom) VALUES ('Alex');</code></li>
                              <li>Afficher le prénom des abonnés avec l'id des livres empruntés : <br> <code>-> SELECT a.prenom, e.id_livre FROM abonnes a, emprunt e, livre l WHERE e.id_livre = l.id_livre AND e.id_abonne = a.id_abonne;</code> <br> <code>-> SELECT a.prenom, l.id_livre, e.date_sortie FROM abonnes a, emprunt e, livre l WHERE e.id_livre = l.id_livre AND e.id_abonne = a.id_abonne ORDER BY e.date_sortie;</code></li>
                         </ul>
                    </div>
               </div> <!-- fin row -->
          </main> 
     </div> 
     <!-- fin du container fluid -->
     <footer>
     <!-- place footer here -->
     </footer>
     <!-- Bootstrap JavaScript Libraries -->
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js" integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script>
</body>
</html>